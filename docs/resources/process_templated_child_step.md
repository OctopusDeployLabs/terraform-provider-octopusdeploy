---
page_title: "octopusdeploy_process_templated_child_step Resource - terraform-provider-octopusdeploy"
subcategory: "Runbook & Deployment Processes"
description: |-
  This resource manages a child step of a Runbook or Deployment process which based on existing custom step template
---

# octopusdeploy_process_templated_child_step (Resource)

This resource manages a child step of a Runbook or Deployment process which based on existing custom step template

### Remarks
Child Steps are used to define multiple steps that should run together during a [rolling deployment](https://oc.to/Rolling-Deployments).

Like in the Octopus Server Portal, Child Steps always live within a parent step. You can define multiple Child Steps for a given Parent. The Parent Step's action will always be the first in the group. After that, ordering within the Parent works in the same way as normal steps: they will be in the order in which they're applied by Terraform. Given this is not guaranteed to be deterministic, and to support reordering or inserting new steps as your config evolves, we strongly recommend you also use the `octopusdeploy_process_child_steps_order` resource to explicitly define and pin your order.

## Example Usage

```terraform
resource "octopusdeploy_environment" "development" {
  name = "Development"
}

resource "octopusdeploy_environment" "production" {
  name = "Production"
}

# Template
resource "octopusdeploy_step_template" "my_script" {
  action_type     = "Octopus.Script"
  name            = "Run My Script"
  step_package_id = "Octopus.Script"
  packages        = [
    {
      package_id = "example.package"
      acquisition_location = "Server"
      feed_id = "Feeds-12"
      name = "util.one"
      properties = {
        extract = "True"
        purpose = ""
        selection_mode = "immediate"
      }
    }
  ]

  parameters = [
    {
      name = "Parameter.One"
      id = "10001000-0000-0000-0000-100010001001"
      label = "First Parameter"
      default_value = "default-value-one"
      display_settings = {
        "Octopus.ControlType" : "SingleLineText"
      }
    },
    {
      name = "Parameter.Two"
      id = "10001000-0000-0000-0000-100010001002"
      label = "Second Parameter"
      display_settings = {
        "Octopus.ControlType": "SingleLineText"
      }
    },
  ]
    
  properties = {
    "Octopus.Action.Script.ScriptBody": "echo '1.#{Parameter.One} ... 2.#{Parameter.Two} ...'"
    "Octopus.Action.Script.ScriptSource": "Inline"
    "Octopus.Action.Script.Syntax": "Bash"
  }
}

resource "octopusdeploy_project" "example" {
  project_group_id = "ProjectGroups-1"
  lifecycle_id = "Lifecycles-1"
  name = "Example"
}

resource "octopusdeploy_channel" "example" {
  name       = "Example Channel (OK to Delete)"
  project_id = octopusdeploy_project.example.id
}

resource "octopusdeploy_process" "example" {
  project_id  = octopusdeploy_project.example.id
}

resource "octopusdeploy_process_step" "parent" {
  process_id  = octopusdeploy_process.app.id
  name = "Parent Step"
  properties = {
    "Octopus.Action.MaxParallelism" = "2"
    "Octopus.Action.TargetRoles" = "azure-one"
  }
  type = "Octopus.Script"
  execution_properties = {
    "Octopus.Action.RunOnServer" = "True"
    "Octopus.Action.Script.ScriptSource" = "Inline"
    "Octopus.Action.Script.Syntax"       = "PowerShell"
    "Octopus.Action.Script.ScriptBody" = <<-EOT
      Write-Host "Parent Step:  #{My.Variable}"
    EOT
  }
}

# Templated script child step
resource "octopusdeploy_process_templated_child_step" "script" {
  process_id  = octopusdeploy_process.example.id
  parent_id = octopusdeploy_process_step.parent.id
  name = "Templated Child Step"
  template_id = octopusdeploy_step_template.my_script.id
  template_version = octopusdeploy_step_template.my_script.version

  # Parameter's default value is used when not provided in configuration
  parameters = {
    "Parameter.Two" = "my-second-value"
  }

  execution_properties = {
    "Octopus.Action.RunOnServer" = "True",
    "My.Custom.Property" = "Something",
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of this resource.
- `parent_id` (String) Id of the process step this step belongs to.
- `process_id` (String) Id of the process this step belongs to.
- `template_id` (String) Id of template this step will be based on.
- `template_version` (Number) Version of the template this step will be based on.

### Optional

- `channels` (Set of String) A set of channels associated with this step.
- `condition` (String) When to run the step, can be 'Success' - run when previous child step succeed or variable expression - run when the expression evaluates to true
- `container` (Attributes) When set used to run step inside a container on the Octopus Server. Octopus Server must support container execution. (see [below for nested schema](#nestedatt--container))
- `environments` (Set of String) A set of environments within which this step will run.
- `excluded_environments` (Set of String) A set of environments that this step will be skipped in.
- `execution_properties` (Map of String) Action properties where the key is the property name and the value is its value.
- `is_disabled` (Boolean) Indicates the disabled status of this step.
- `is_required` (Boolean) Indicates the required status of this step.
- `notes` (String) The notes associated with this step.
- `parameters` (Map of String) Parameters required by template. Default value will be assigned when parameter has default value and parameter is not set.
- `slug` (String) The human-readable unique identifier for the step.
- `space_id` (String) The space ID associated with this process_templated_child_step.
- `tenant_tags` (Set of String) A set of tenant tags associated with this step.
- `worker_pool_id` (String) The worker pool associated with this step.
- `worker_pool_variable` (String) The worker pool variable associated with this step.

### Read-Only

- `git_dependencies` (Attributes Map) References of git dependencies copied from the template (see [below for nested schema](#nestedatt--git_dependencies))
- `id` (String) The unique ID for this resource.
- `packages` (Attributes Map) Package references copied from the template (see [below for nested schema](#nestedatt--packages))
- `template_properties` (Map of String) Template properties which will be copied to the step
- `type` (String) Execution type of the step copied from the template.
- `unmanaged_parameters` (Map of String) Template parameters not configured by the practitioner (usually parameters with default value).

<a id="nestedatt--container"></a>
### Nested Schema for `container`

Optional:

- `feed_id` (String) Feed where the container will be pulled from.
- `image` (String) Image of the container with tag included.


<a id="nestedatt--git_dependencies"></a>
### Nested Schema for `git_dependencies`

Required:

- `default_branch` (String) Name of the default branch of the repository.
- `git_credential_type` (String) The Git credential authentication type.
- `repository_uri` (String) The Git URI for the repository where this resource is sourced from

Optional:

- `file_path_filters` (Set of String) List of file path filters used to narrow down the directory where files are to be sourced from. Supports glob patten syntax.
- `git_credential_id` (String) ID of an existing Git credential.


<a id="nestedatt--packages"></a>
### Nested Schema for `packages`

Required:

- `package_id` (String) Package ID or a variable-expression

Optional:

- `acquisition_location` (String) Whether to acquire this package on the server ('Server'), target ('ExecutionTarget') or not at all ('NotAcquired'). Can be an expression
- `feed_id` (String) The feed ID associated with this package reference
- `properties` (Map of String) A collection of properties associated with this package

Read-Only:

- `id` (String) The unique ID for this resource.

## Import

Import is supported using the following syntax:

```shell
terraform import [options] octopusdeploy_process_templated_child_step.<name> "<process-id>:<parent-step-id>:<child-step-id>"
```
